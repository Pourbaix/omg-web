(this["webpackJsonpomg-web"]=this["webpackJsonpomg-web"]||[]).push([[0],{137:function(e,t,a){},138:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(16),i=a.n(r),c=a(9),o=a(10),l=a(12),d=a(11),u=a(19),m=a(22),h=a(172),p=a(1),b=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("ul",{className:"navbar-nav bg-gradient-primary sidebar sidebar-dark accordion",id:"accordionSidebar",children:[Object(p.jsxs)(m.b,{className:"sidebar-brand d-flex align-items-center justify-content-center",to:"/index",children:[Object(p.jsx)("div",{className:"sidebar-brand-icon",children:Object(p.jsx)("i",{className:"fas fa-chart-area"})}),Object(p.jsx)("div",{className:"sidebar-brand-text mx-3",children:"OMG Web"})]}),Object(p.jsx)("hr",{className:"sidebar-divider my-0"}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(m.b,{className:"nav-link",to:"/index",children:[Object(p.jsx)("i",{className:"fas fa-fw fa-home"}),Object(p.jsx)("span",{children:"Home"})]})}),Object(p.jsx)("hr",{className:"sidebar-divider"}),Object(p.jsx)("div",{className:"sidebar-heading",children:"Charts"}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(m.b,{className:"nav-link",to:"/chartsbytag",children:[Object(p.jsx)("i",{className:"fas fa-fw fa-tag"}),Object(p.jsx)("span",{children:"By Tag"})]})}),Object(p.jsx)("hr",{className:"sidebar-divider"}),Object(p.jsx)("div",{className:"sidebar-heading",children:"Tools"}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(m.b,{className:"nav-link pb-2",to:"/tagactivation",children:[Object(p.jsx)("i",{className:"fas fa-fw fa-plus-circle"}),Object(p.jsx)("span",{children:"Tag creation"})]})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(m.b,{className:"nav-link pt-2 pb-2",to:"/tagshistory",children:[Object(p.jsx)("i",{className:"fas fa-fw fa-history"}),Object(p.jsx)("span",{children:"Tags history"})]})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(m.b,{className:"nav-link pt-2",to:"/import",children:[Object(p.jsx)("i",{className:"fas fa-fw fa-file-upload"}),Object(p.jsx)("span",{children:"Import data"})]})}),Object(p.jsx)("hr",{className:"sidebar-divider"}),Object(p.jsx)("div",{className:"sidebar-heading",children:"Manage"}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(m.b,{className:"nav-link pb-2",to:"/dataManager",children:[Object(p.jsx)("i",{className:"fas fa-fw fa-database"}),Object(p.jsx)("span",{children:"Data"})]})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(m.b,{className:"nav-link pt-2",to:"/tagsManager",children:[Object(p.jsx)("i",{className:"fas fa-fw fa-tags"}),Object(p.jsx)("span",{children:"Tags"})]})})]})}}]),a}(n.Component),j=a(39),g={apiKey:""};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETKEY":return{apiKey:t.value}||e;default:return e}},x=Object(j.b)({storeApiKey:f}),v=Object(j.c)(x),y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).getCookie=function(t){return e.props.cookies.get(t)},e.setCookie=function(t,a){e.props.cookies.set(t,a)},e}return Object(o.a)(a,[{key:"logout",value:function(){v.dispatch({type:"SETKEY",value:""}),this.setCookie("apiKey","")}},{key:"setTitle",value:function(){var e={"/":"Home","/index":"Home","/datamanager":"Data Manager","/tagsmanager":"Tags Manager","/tagactivation":"Tag Creation","/tagshistory":"History","/fileUpload":"Import data","/chartsbyTag":"Charts by tag"};return e.hasOwnProperty(window.location.pathname)?Object(p.jsx)("p",{id:"topbarTitle",className:"navbar-brand mb-0",children:e[window.location.pathname]}):Object(p.jsx)("p",{id:"topbarTitle",className:"navbar-brand mb-0"})}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("nav",{className:"navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow",children:[Object(p.jsx)("div",{children:this.setTitle()}),Object(p.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(p.jsx)("div",{className:"topbar-divider mr-0 d-sm-block"}),Object(p.jsxs)("li",{className:"nav-item dropdown no-arrow ",children:[Object(p.jsxs)("div",{className:"nav-link dropdown-toggle",id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[Object(p.jsx)("span",{className:"mr-2 d-lg-inline text-gray-600",children:"User"}),Object(p.jsx)("i",{className:"fas fa-2x fa-fw fa-user-circle"})]}),Object(p.jsxs)("div",{className:"dropdown-menu dropdown-menu-right shadow animated--grow-in","aria-labelledby":"userDropdown",children:[Object(p.jsxs)("div",{className:"dropdown-item",children:[Object(p.jsx)("i",{className:"fas fa-user fa-sm fa-fw mr-2 text-gray-400"}),"Profile"]}),Object(p.jsxs)("div",{className:"dropdown-item",children:[Object(p.jsx)("i",{className:"fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"}),"Settings"]}),Object(p.jsx)("div",{className:"dropdown-divider"}),Object(p.jsxs)("button",{className:"dropdown-item","data-toggle":"modal","data-target":"#logoutModal",onClick:function(){return e.logout()},children:[Object(p.jsx)("i",{className:"fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"}),"Logout"]})]})]})]})]})}}]),a}(n.Component),O=Object(h.a)(y),w=a(6),N=a.n(w),k=a(13),C="http://127.0.0.1:3001/api",S=new Headers({"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br"});function T(){return D.apply(this,arguments)}function D(){return(D=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/tags/all",e.next=3,fetch("http://127.0.0.1:3001/api/tags/all",{credentials:"same-origin",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br",Authorization:"Bearer "+v.getState().storeApiKey.apiKey}});case 3:return t=e.sent,e.abrupt("return",t.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(k.a)(N.a.mark((function e(t,a,n){var s,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C+"/data/file",(s=new FormData).append("file",t.files[0]),s.append("sensorModel",a),s.append("importName",n),e.next=8,fetch("http://127.0.0.1:3001/api/data/file",{credentials:"same-origin",method:"POST",body:s,headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br"}});case 8:return r=e.sent,e.t0=r,e.next=12,r.json();case 12:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 16:return e.prev=16,e.t2=e.catch(0),e.abrupt("return",e.t2);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function A(e,t,a,n){return E.apply(this,arguments)}function E(){return(E=Object(k.a)(N.a.mark((function e(t,a,n,s){var r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=C+"/data/chart?tagName="+t+"&fromTime="+n[0]+"&toTime="+n[1],a&&(r+="&startDate="+a[0].toISOString()+"&endDate="+a[1].toISOString()),s.length>0&&(r+="&weekDays="+s.join("-")),e.next=5,fetch(r,{credentials:"same-origin",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br",Authorization:"Bearer "+v.getState().storeApiKey.apiKey}});case 5:return i=e.sent,e.abrupt("return",i.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return L.apply(this,arguments)}function L(){return(L=Object(k.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/users/signin",e.next=3,fetch("http://127.0.0.1:3001/api/users/signin",{credentials:"same-origin",method:"POST",headers:S,body:JSON.stringify({email:t,password:a})});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return z.apply(this,arguments)}function z(){return(z=Object(k.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/users/signup",e.next=3,fetch("http://127.0.0.1:3001/api/users/signup",{credentials:"same-origin",method:"POST",headers:S,body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return H.apply(this,arguments)}function H(){return(H=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/data/days",e.next=3,fetch("http://127.0.0.1:3001/api/data/days",{credentials:"same-origin",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br",Authorization:"Bearer "+v.getState().storeApiKey.apiKey}});case 3:return t=e.sent,e.abrupt("return",t.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return K.apply(this,arguments)}function K(){return(K=Object(k.a)(N.a.mark((function e(){var t,a,n,s=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",a=C+"/tags/days",t&&(a+="?tagName="+t),e.next=5,fetch(a,{credentials:"same-origin",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br",Authorization:"Bearer "+v.getState().storeApiKey.apiKey}});case 5:return n=e.sent,e.abrupt("return",n.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return q.apply(this,arguments)}function q(){return(q=Object(k.a)(N.a.mark((function e(t){var a,n,s,r=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"",n=C+"/tags/day?day="+t,a&&(n+="&tagName="+a),e.next=5,fetch(n,{credentials:"same-origin",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br",Authorization:"Bearer "+v.getState().storeApiKey.apiKey}});case 5:return s=e.sent,e.abrupt("return",s.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return W.apply(this,arguments)}function W(){return(W=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/data/importnames",e.next=3,fetch("http://127.0.0.1:3001/api/data/importnames",{credentials:"same-origin",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br",Authorization:"Bearer "+v.getState().storeApiKey.apiKey}});case 3:return t=e.sent,e.abrupt("return",t.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(k.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/data/file",e.next=3,fetch("http://127.0.0.1:3001/api/data/file",{credentials:"same-origin",method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br",Authorization:"Bearer "+v.getState().storeApiKey.apiKey},body:'{"importName": "'+t+'"}'});case 3:return a=e.sent,e.t0=a,e.next=7,a.json();case 7:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return J.apply(this,arguments)}function J(){return(J=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C+"/data/all",e.next=4,fetch("http://127.0.0.1:3001/api/data/all",{credentials:"same-origin",method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br",Authorization:"Bearer "+v.getState().storeApiKey.apiKey}});case 4:return t=e.sent,e.t0=t,e.next=8,t.json();case 8:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 12:e.prev=12,e.t2=e.catch(0),console.log(e.t2);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function _(){return(_=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/users/verify",e.next=3,fetch("http://127.0.0.1:3001/api/users/verify",{credentials:"same-origin",method:"GET",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br"}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/tags/recent",e.next=3,fetch("http://127.0.0.1:3001/api/tags/recent",{credentials:"same-origin",method:"GET",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br"}});case 3:if(!(t=e.sent).ok){e.next=10;break}return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(k.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C+"/tags/one",e.next=4,fetch("http://127.0.0.1:3001/api/tags/one",{method:"POST",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({tag:t,startDatetime:a,endDatetime:a})});case 4:if(!(n=e.sent).ok){e.next=11;break}return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",null);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(k.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C+"/tags/recentHistorySorted?datetimeBegin="+t,e.next=3,fetch(a,{credentials:"same-origin",method:"GET",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br"}});case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(k.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C+"/tags/recentHistory?datetimeBegin="+t,e.next=3,fetch(a,{credentials:"same-origin",method:"GET",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br"}});case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/tags/countAllActivations",e.next=3,fetch("http://127.0.0.1:3001/api/tags/countAllActivations",{credentials:"same-origin",method:"GET",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br"}});case 3:if(!(t=e.sent).ok){e.next=10;break}return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(k.a)(N.a.mark((function e(t,a,n){var s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/tags/one",e.next=3,fetch("http://127.0.0.1:3001/api/tags/one",{credentials:"same-origin",method:"PUT",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json"},body:JSON.stringify({tagId:a,tagDatetime:n,tagName:t})});case 3:if(!(s=e.sent).ok){e.next=10;break}return e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(k.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/tags/one",e.next=3,fetch("http://127.0.0.1:3001/api/tags/one",{credentials:"same-origin",method:"DELETE",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json"},body:JSON.stringify({tagId:t})});case 3:return a=e.sent,e.t0=a,e.next=7,a.json();case 7:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(k.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/tags/all",e.next=3,fetch("http://127.0.0.1:3001/api/tags/all",{credentials:"same-origin",method:"DELETE",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json"},body:JSON.stringify({tagName:t})});case 3:return a=e.sent,e.t0=a,e.next=7,a.json();case 7:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(k.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/tags/all",e.next=3,fetch("http://127.0.0.1:3001/api/tags/all",{credentials:"same-origin",method:"PUT",headers:{Authorization:"Bearer "+v.getState().storeApiKey.apiKey,Accept:"application/json","Accept-Charset":"utf-8","Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json"},body:JSON.stringify({tagName:t,newTagName:a})});case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).toSignUp=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setCookie("method","up");case 2:case"end":return e.stop()}}),e)}))),n.handleSignIn=Object(k.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n.state.email||""===n.state.password){e.next=17;break}return e.next=3,I(n.state.email,n.state.password);case 3:if("ok"===(t=e.sent).status){e.next=8;break}n.setState({error:t.message}),e.next=15;break;case 8:return(a=new Date(Date.now())).setHours(a.getHours()+2),e.next=12,n.setCookie("apiKey",t.token,{expires:a});case 12:return e.next=14,n.setApiKey(t.token);case 14:return e.abrupt("return",Object(p.jsx)(u.a,{to:"/"}));case 15:e.next=18;break;case 17:n.setState({error:"Missing email and/or password"});case 18:case"end":return e.stop()}}),e)}))),n.setEmail=function(e){return n.setState({email:e.target.value})},n.setPassword=function(e){return n.setState({password:e.target.value})},n.setCookie=function(e,t,a){n.props.cookies.set(e,t,a)},n.state={email:"",password:"",error:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("body").className="bg-gradient-primary"}},{key:"showError",value:function(){var e="";return""!==this.state.error&&(document.getElementById("horizLine").classList.remove("mt-4"),document.getElementById("horizLine").classList.add("mt-0"),e=Object(p.jsx)("div",{className:"text-danger d-flex justify-content-center mt-3 mb-0",children:Object(p.jsx)("p",{children:this.state.error})})),e}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"col-12",children:Object(p.jsxs)("div",{id:"wrapper d-flex flex-column",children:[Object(p.jsxs)("div",{className:"row ml-4 mt-4 d-flex flex-row align-items-center",children:[Object(p.jsx)("i",{className:"fas fa-chart-area fa-4x text-white mb-1"}),Object(p.jsx)("div",{className:"ml-3 h1 mb-0 text-white font-weight-bold",children:"OMG Web"})]}),Object(p.jsx)("div",{className:"row justify-content-center",children:Object(p.jsx)("div",{className:"card o-hidden border-0 shadow-lg mt-5 ml-2 mr-2 mb-2",style:{width:"20rem"},children:Object(p.jsx)("div",{className:"card-body",children:Object(p.jsxs)("div",{className:"p-3",children:[Object(p.jsxs)("div",{className:"row justify-content-center flex-column",children:[Object(p.jsx)("h1",{className:"h3 text-gray-900 mb-4",children:"Sign in"}),Object(p.jsxs)("div",{className:"user",children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"email",className:"form-control form-control-user",id:"exampleInputEmail","aria-describedby":"emailHelp",placeholder:"Email",onChange:this.setEmail})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"password",className:"form-control form-control-user",id:"exampleInputPassword",placeholder:"Password",onChange:this.setPassword})}),Object(p.jsx)("button",{className:"btn btn-primary btn-user btn-block",onClick:this.handleSignIn,type:"submit",children:"Login"})]})]}),this.showError(),Object(p.jsx)("hr",{id:"horizLine",className:"mt-4"}),Object(p.jsxs)("div",{className:"row justify-content-center flex-column",children:[Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)("button",{className:"btn btn-link disabled",children:"Forgot Password?"})}),Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)("button",{className:"btn btn-link",onClick:this.toSignUp,children:"Create an Account!"})})]})]})})})})]})})}},{key:"setApiKey",value:function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.dispatch({type:"SETKEY",value:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(n.Component),oe=Object(h.a)(ce),le=a(74),de=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSignUp=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({error:""}),n.removeDangerInput(["inputFirstName","inputLastName","inputEmail","inputPassword","inputConfirmPassword"]),"createAccount2121"===n.state.secret){e.next=6;break}return n.dangerInput(["inputSecret"]),e.next=6,n.setState({error:"Wrong secret"});case 6:if(n.state.password===n.state.confirmPassword){e.next=12;break}return n.dangerInput(["inputPassword","inputConfirmPassword"]),e.next=10,n.setState({error:"Passwords must match"});case 10:e.next=16;break;case 12:if(!(n.state.password.length<8)){e.next=16;break}return n.dangerInput(["inputPassword","inputConfirmPassword"]),e.next=16,n.setState({error:"Password must be at least 8 characters long"});case 16:if(n.isValidEmail(n.state.email)){e.next=20;break}return n.dangerInput(["inputEmail"]),e.next=20,n.setState({error:"Incorrect email"});case 20:if(n.isValidName(n.state.firstName)){e.next=24;break}return n.dangerInput(["inputFirstName"]),e.next=24,n.setState({error:"You can't use special characters for names"});case 24:if(n.isValidName(n.state.lastName)){e.next=28;break}return n.dangerInput(["inputLastName"]),e.next=28,n.setState({error:"You can't use special characters for names"});case 28:if(n.state.error){e.next=38;break}return document.getElementById("btnSignUp").classList.remove("btn-primary"),document.getElementById("btnSignUp").setAttribute("disabled","true"),document.getElementById("btnSignUp").classList.add("btn-secondary"),e.next=34,F({firstName:n.state.firstName,lastName:n.state.lastName,email:n.state.email,password:n.state.password});case 34:t=e.sent,console.log(t),"ok"===t.status&&n.setState({messageApi:t.message,showSmallButtons:!1}),"error"===t.status&&(n.setState({error:t.message}),document.getElementById("btnSignUp").classList.remove("btn-secondary"),document.getElementById("btnSignUp").removeAttribute("disabled"));case 38:case"end":return e.stop()}}),e)}))),n.setFirstName=function(e){return n.setState({firstName:e.target.value})},n.setLastName=function(e){return n.setState({lastName:e.target.value})},n.setEmail=function(e){return n.setState({email:e.target.value})},n.setPassword=function(e){return n.setState({password:e.target.value})},n.setSecret=function(e){return n.setState({secret:e.target.value})},n.setConfirmPassword=function(e){return n.setState({confirmPassword:e.target.value})},n.toSignIn=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setCookie("method","in");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),n.getCookie=function(e){return n.props.cookies.get(e)},n.setCookie=function(e,t){n.props.cookies.set(e,t)},n.state={firstName:"",lastname:"",email:"",password:"",confirmPassword:"",error:"",messageApi:"",showSmallButtons:!0,secret:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("body").className="bg-gradient-primary"}},{key:"dangerInput",value:function(e){var t,a=Object(le.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;document.getElementById(n).classList.add("border-danger")}}catch(s){a.e(s)}finally{a.f()}}},{key:"removeDangerInput",value:function(e){var t,a=Object(le.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;document.getElementById(n).classList.remove("border-danger")}}catch(s){a.e(s)}finally{a.f()}}},{key:"showError",value:function(){var e="";return""!==this.state.error&&(document.getElementById("horizLine").classList.remove("mt-4"),document.getElementById("horizLine").classList.add("mt-0"),e=Object(p.jsx)("div",{className:"text-danger d-flex justify-content-center mt-3 mb-0",children:Object(p.jsx)("p",{children:this.state.error})})),e}},{key:"showSuccess",value:function(){var e="";return""!==this.state.messageApi&&(document.getElementById("horizLine").classList.remove("mt-4"),document.getElementById("horizLine").classList.add("mt-0"),e=Object(p.jsx)("div",{className:"text-success d-flex justify-content-center mt-3 mb-0",children:Object(p.jsx)("p",{children:this.state.messageApi})})),e}},{key:"isValidName",value:function(e){return/^[ ',-\.A-Za-z\xC0-\xCF\xD1-\xD6\xD8-\xDD\xDF-\xE5\xE7-\xF6\xF8-\xFD\xFF\u0104-\u0107\u010C\u010D\u0116-\u0119\u012E\u012F\u0141-\u0144\u0152\u0160\u0161\u016A\u016B\u0172\u0173\u0178-\u017E\u2202]+$/.test(String(e).toLowerCase())}},{key:"isValidEmail",value:function(e){return/^(([^<>()q[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"showSmallButtons",value:function(){return this.state.showSmallButtons?Object(p.jsxs)("div",{id:"smallButtons",className:"row justify-content-center flex-column",children:[Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)("button",{className:"btn btn-link disabled",children:"Forgot Password?"})}),Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)("button",{className:"btn btn-link",onClick:this.toSignIn,children:"Already an account ? Sign in!"})})]}):Object(p.jsx)("div",{id:"smallButtons",className:"row justify-content-center flex-column",children:Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)("button",{className:"btn btn-primary",onClick:this.toSignIn,children:"Sign in !"})})})}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"col-12",children:Object(p.jsxs)("div",{id:"wrapper d-sm-flex flex-column",children:[Object(p.jsxs)("div",{className:"row ml-4 mt-4 d-flex flex-row align-items-center",children:[Object(p.jsx)("i",{className:"fas fa-chart-area fa-4x text-white mb-1"}),Object(p.jsx)("div",{className:"ml-3 h1 mb-0 text-white font-weight-bold",children:"OMG Web"})]}),Object(p.jsx)("div",{className:"row justify-content-center",children:Object(p.jsx)("div",{className:"card o-hidden border-0 shadow-lg mt-5 ml-2 mr-2 mb-2",children:Object(p.jsx)("div",{className:"card-body",children:Object(p.jsxs)("div",{className:"p-3",children:[Object(p.jsxs)("div",{className:"row justify-content-center flex-column",children:[Object(p.jsx)("h1",{className:"h3 text-gray-900 mb-4",children:"Create an account"}),Object(p.jsxs)("div",{className:"user justify-content-center",children:[Object(p.jsxs)("div",{className:"form-group d-flex flex-row",children:[Object(p.jsx)("input",{type:"text",className:"form-control form-control-user",id:"inputFirstName","aria-describedby":"firstName",placeholder:"First name",onChange:this.setFirstName}),Object(p.jsx)("input",{type:"text",className:"form-control form-control-user ml-2",id:"inputLastName","aria-describedby":"lastName",placeholder:"Last name",onChange:this.setLastName})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"email",className:"form-control form-control-user",id:"inputEmail","aria-describedby":"emailHelp",placeholder:"Email",onChange:this.setEmail})}),Object(p.jsxs)("div",{id:"formGroupPassword",className:"form-group d-flex flex-row",children:[Object(p.jsx)("input",{type:"password",className:"form-control form-control-user",id:"inputPassword",placeholder:"Password",onChange:this.setPassword}),Object(p.jsx)("input",{type:"password",className:"form-control form-control-user ml-2",id:"inputConfirmPassword",placeholder:"Confirm password",onChange:this.setConfirmPassword})]}),Object(p.jsx)("div",{id:"formGroupSecret",className:"form-group d-flex flex-row",children:Object(p.jsx)("input",{type:"password",className:"form-control form-control-user",id:"inputSecret",placeholder:"Secret",onChange:this.setSecret})}),Object(p.jsx)("button",{id:"btnSignUp",className:"btn btn-primary btn-user btn-block",onClick:this.handleSignUp,children:"Sign up"}),this.showError(),this.showSuccess()]})]}),Object(p.jsx)("hr",{id:"horizLine",className:"mt-4"}),this.showSmallButtons()]})})})})]})})}}]),a}(n.Component),ue=Object(h.a)(de),me=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{id:"content",children:Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)("div",{className:"error mx-auto","data-text":"404",children:"404"}),Object(p.jsx)("p",{className:"lead text-gray-800 mb-5",children:"Page Not Found"}),Object(p.jsx)("p",{className:"text-gray-500 mb-0",children:"It looks like you found a glitch in the matrix..."}),Object(p.jsx)(m.b,{to:"/",children:"\u2190 Back to home"})]})})})}}]),a}(n.Component),he=Object(u.g)(me),pe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(p.jsx)("h1",{className:"h1 mb-0 text-gray-800",children:"Welcome to OMG Web application !"})})})}}]),a}(n.Component),be=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).uploadFile=function(){"none"!==n.state.sensorModel?n.state.file?n.state.importName?(n.setState({upload:1}),function(e,t,a){return B.apply(this,arguments)}(document.getElementById("dataFileAutoInput"),n.state.sensorModel,n.state.importName).then((function(e){e[0].ok?n.setState({upload:2}):n.setState({upload:-1}),n.setState({resultRequest:e[1]})})).catch((function(e){return n.setState({upload:-1,resultRequest:e.toString()})}))):document.getElementById("importName").classList.contains("is-invalid")||document.getElementById("importName").classList.add("is-invalid"):document.getElementById("dataFileAutoInput").classList.contains("is-invalid")||document.getElementById("dataFileAutoInput").classList.add("is-invalid"):document.getElementById("sensorModelSelector").classList.contains("is-invalid")||document.getElementById("sensorModelSelector").classList.add("is-invalid")},n.fileChange=function(e){var t=new Date(Date.now()),a=document.getElementById("dataFileAutoInput").files[0].name+" - "+t.toLocaleString();n.setState({file:e.target.value,importName:a}),document.getElementById("importName").value=a,document.getElementById("dataFileAutoInput").classList.contains("is-invalid")&&document.getElementById("dataFileAutoInput").classList.remove("is-invalid"),document.getElementById("importName").classList.contains("is-invalid")&&document.getElementById("importName").classList.remove("is-invalid"),n.setState({upload:0})},n.importNameChange=function(e){n.setState({importName:e.target.value}),document.getElementById("importName").classList.contains("is-invalid")&&document.getElementById("importName").classList.remove("is-invalid"),n.setState({upload:0})},n.sensorModelChange=function(e){n.setState({sensorModel:e.target.value}),document.getElementById("sensorModelSelector").classList.contains("is-invalid")&&document.getElementById("sensorModelSelector").classList.remove("is-invalid"),n.setState({upload:0})},n.changeUploadButtonStatus=function(e,t,a){var n=document.getElementById("uploadButton"),s=document.getElementById("uploadButtonIcon"),r=document.getElementById("uploadButtonText");s.classList.forEach((function(e){e.startsWith("fa-")&&s.classList.remove(e)})),n.classList.forEach((function(e){(e.startsWith("btn-primary")||e.startsWith("btn-danger")||e.startsWith("btn-success"))&&n.classList.remove(e)})),n.setAttribute("disabled","true"),n.classList.add(t),s.classList.add(e),r.innerText=a},n.state={upload:"",file:"",sensorModel:"none",resultRequest:"",importName:""},n}return Object(o.a)(a,[{key:"uploadResults",value:function(){var e=document.getElementById("uploadButton");-1===this.state.upload&&(this.changeUploadButtonStatus("fa-times","btn-danger","error"),document.getElementById("uploadButtonInvalidText").innerText=this.state.resultRequest),0===this.state.upload&&(this.changeUploadButtonStatus("fa-upload","btn-primary","upload data"),e.removeAttribute("disabled"),document.getElementById("uploadButtonInvalidText").innerText=""),1===this.state.upload&&this.changeUploadButtonStatus("fa-sync-alt","btn-primary","uploading..."),2===this.state.upload&&this.changeUploadButtonStatus("fa-check","btn-success","uploaded !")}},{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsx)("div",{id:"uploadCard",className:"card d-flex border-bottom-primary shadow h-100 py-2",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"row no-gutters align-items-center",children:Object(p.jsx)("div",{className:"col mr-2",children:Object(p.jsx)("div",{className:"text font-weight-bold text-primary text-uppercase",children:"File import"})})}),Object(p.jsx)("hr",{className:"sidebar-divider"}),Object(p.jsxs)("form",{className:"ml-2 mr-2",id:"uploadForm",children:[Object(p.jsxs)("div",{className:"row form-group",children:[Object(p.jsx)("label",{className:"form-check-label",htmlFor:"sensorModelSelector",children:"Sensor model"}),Object(p.jsxs)("select",{className:"form-control",id:"sensorModelSelector",name:"pumpModel",onChange:this.sensorModelChange,defaultValue:{value:"none"},children:[Object(p.jsx)("option",{value:"none",children:"Choose a model..."}),Object(p.jsx)("option",{value:"minimed",children:"MiniMed"})]}),Object(p.jsx)("div",{className:"invalid-feedback",children:"You have to choose a model"})]}),Object(p.jsxs)("div",{className:"row form-group mt-2",children:[Object(p.jsx)("label",{className:"form-check-label",htmlFor:"importName",children:"Import name (default : filename)"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"importName",onChange:this.importNameChange}),Object(p.jsx)("div",{className:"invalid-feedback",children:"You have to enter a import name"})]}),Object(p.jsxs)("div",{className:"row form-group mt-2",children:[Object(p.jsx)("label",{className:"form-check-label",htmlFor:"dataFileAutoInput",children:"Sensor data CSV"}),Object(p.jsx)("input",{type:"file",className:"form-control-file",id:"dataFileAutoInput",name:"file",accept:".csv",onChange:this.fileChange}),Object(p.jsx)("div",{className:"invalid-feedback",children:"You have to choose a CSV file"})]})]}),Object(p.jsxs)("div",{className:"row d-flex align-items-center justify-content-end mr-2",children:[Object(p.jsx)("div",{id:"uploadButtonInvalidText",className:"text-danger mr-4"}),Object(p.jsxs)("button",{id:"uploadButton",className:"btn btn-primary btn-icon-split",onClick:this.uploadFile,children:[Object(p.jsx)("span",{className:"icon text-white-50",children:Object(p.jsx)("i",{id:"uploadButtonIcon",className:"fas fa-upload"})}),Object(p.jsx)("span",{id:"uploadButtonText",className:"text",children:"Upload data"})]})]}),this.uploadResults()]})})})}}]),a}(n.Component),je=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"container-fluid d-flex ml-2 mr-2",children:Object(p.jsx)(be,{})})}}]),a}(n.Component),ge=a(48),fe=a.n(ge);a(109);fe.a.defaults.global.defaultFontFamily="Nunito",fe.a.defaults.global.defaultFontColor="#858796";var xe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).changeTagSelected=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({tagSelected:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.changeDatetimeRange=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({datetimeRange:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.changeTimeSelected=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({timeSelected:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.changeWeekDaysSelected=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({weekDaysSelected:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.changeConfig=function(e){n.setState({config:e})},n.changeMyChart=function(e){n.setState({myChart:e})},n.state={tagSelected:n.props.tagSelected,datetimeRange:n.props.datetimeRange,timeSelected:n.props.timeSelected,weekDaysSelected:n.props.weekDaysSelected,loadingData:!0,myChart:"",config:{type:"line",data:{},options:{annotation:{annotations:[{drawTime:"beforeDatasetsDraw",id:"verticalLine",type:"line",mode:"vertical",scaleID:"x-axis-0",value:"+00:00:00",borderColor:"darkgray",borderWidth:2},{drawTime:"beforeDatasetsDraw",id:"horizontalLine80",type:"line",mode:"horizontal",scaleID:"y-axis-0",value:"70",borderColor:"darkgray",borderDash:[4,4],borderWidth:2},{drawTime:"beforeDatasetsDraw",id:"horizontalLine130",type:"line",mode:"horizontal",scaleID:"y-axis-0",value:"180",borderColor:"darkgray",borderDash:[4,4],borderWidth:2}]},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{time:{unit:"date"},ticks:{padding:10,autoSkip:!0,maxTicksLimit:20}}],yAxes:[{ticks:{maxTicksLimit:10,paddings:10,type:"linear"}}]},legend:{display:!0,position:"top"},tooltips:{backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",titleMarginBottom:10,titleFontColor:"#6e707e",titleFontSize:14,borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,intersect:!1,mode:"index",caretPadding:10}}}},n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.props.tagSelected!==e.tagSelected&&this.changeTagSelected(this.props.tagSelected).then((function(){n.getChartData().then((function(){n.state.myChart.update()}))})),this.props.datetimeRange!==e.datetimeRange&&this.changeDatetimeRange(this.props.datetimeRange).then((function(){n.getChartData().then((function(){n.state.myChart.update()}))})),this.props.timeSelected!==e.timeSelected&&this.changeTimeSelected(this.props.timeSelected).then((function(){n.getChartData().then((function(){n.state.myChart.update()}))})),this.props.weekDaysSelected!==e.weekDaysSelected&&this.changeWeekDaysSelected(this.props.weekDaysSelected).then((function(){n.getChartData().then((function(){n.state.myChart.update()}))}))}},{key:"getChartData",value:function(){var e=Object(k.a)(N.a.mark((function e(){var t,a,n,s=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingData:!0}),t=["#dc414b","#307aac","#18a060","#8e4e88","#f26542","#36a8dd","#36cb83","#bb5888","#f69e46","#8d8162","#E15B64","#3688BF","#1BB16B","#9E5797","#F47E60","#51B4E1","#4DD191","#C46E98","#F8B26A","#9B8F6F"],a=["#E15B64","#3688BF","#1BB16B","#9E5797","#F47E60","#51B4E1","#4DD191","#C46E98","#F8B26A","#9B8F6F","#eb9096","#72afd7","#4ae49c","#bf8bba","#f8a894","#88cceb","#86e0b4","#d79db9","#fac998","#bbb39d"],n={},e.next=6,A(this.state.tagSelected,this.state.datetimeRange,this.state.timeSelected,this.state.weekDaysSelected).then((function(e){n.labels=e.chartData.map((function(e){return e[0]})),n.datasets=[],n.datasets.push(s.setAverageDataset(e.chartData));for(var r=function(s){var r={label:new Date(e.datasetsLabel[s]).toLocaleString("fr-BE",{hour:"2-digit",minute:"2-digit",second:"2-digit",day:"numeric",month:"short",year:"numeric"}),lineTension:.3,borderColor:a[s],borderWidth:2,pointRadius:0,fill:!1,pointBackgroundColor:a[s],pointBorderColor:a[s],pointHoverRadius:3,pointHoverBackgroundColor:t[s],pointHoverBorderColor:t[s],pointHoverBorderWidth:3,pointHitRadius:5,pointBorderWidth:2,spanGaps:!1,data:e.chartData.map((function(e){return e[1][s]}))};n.datasets.push(r)},i=0;i<Object.keys(e.datasetsLabel).length;i++)r(i);var c=s.state.config;c.data=n,s.changeConfig(c),s.setState({loadingData:!1})}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAverageDataset",value:function(e){var t=e.map((function(e){return e[1].filter((function(e){return e>0})).length}));return{label:"Average line",lineTension:.3,borderColor:"#444444",borderDash:[10,5],borderWidth:3,pointRadius:0,fill:!1,pointBackgroundColor:"#444444",pointBorderColor:"#444444",pointHoverRadius:3,pointHoverBackgroundColor:"#444444",pointHoverBorderColor:"#444444",pointHoverBorderWidth:5,pointHitRadius:5,pointBorderWidth:2,spanGaps:!1,data:e.map((function(a){return a[1].reduce((function(e,t){return e+t}))/t[e.indexOf(a)]})).map((function(e){return Math.round(e)}))}}},{key:"componentDidMount",value:function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChartData();case 2:this.changeMyChart(new fe.a(document.getElementById("myAreaChart").getContext("2d"),this.state.config));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(p.jsx)("div",{className:"chart-area d-flex justify-content-center",children:Object(p.jsx)("canvas",{className:"img-fluid h-100 w-100",id:"myAreaChart"})})}}]),a}(n.Component),ve=a(86),ye=a.n(ve),Oe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).setContainerClassName=function(){var e="card shadow mb-4 "+(n.props.color?"border-bottom-"+n.props.color:"border-bottom-primary");return e+=n.checkMobile()?" w-100":" mr-3"},n.setTitleClassName=function(){return"text font-weight-bold text-uppercase mb-1 "+(n.props.color?"text-"+n.props.color:"text-primary")},n.state={title:""},n}return Object(o.a)(a,[{key:"checkMobile",value:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t}},{key:"componentDidMount",value:function(){this.setState({title:this.props.title?this.props.title:"Basic Card Example"})}},{key:"render",value:function(){return Object(p.jsx)("div",{className:this.setContainerClassName(),children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"no-gutters align-items-center",children:Object(p.jsx)("div",{className:"col mr-2",children:Object(p.jsx)("div",{className:this.setTitleClassName(),children:this.state.title})})}),Object(p.jsx)("hr",{className:"sidebar-divider mb-1"}),this.props.children]})})}}]),a}(n.Component),we=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).tagChange=function(e){n.setState({tagSelected:e.target.value})},n.fromTimeChange=function(e){n.setState({fromTime:e.target.value})},n.toTimeChange=function(e){n.setState({toTime:e.target.value})},n.state={tags:[],tagSelected:"Choose a tag...",loadingTags:!0,dtrp:null,fromTime:-1,toTime:3,weekDaysSelected:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;T().then((function(t){try{t.unshift("Choose a tag..."),e.setState({tags:t}),e.setState({loadingTags:!1})}catch(a){console.log("error while try to retrieve tags : "+a)}}))}},{key:"weekDaysChange",value:function(e){var t=this.state.weekDaysSelected,a=t.indexOf(e);a>-1?t.splice(a,1):t.push(e),this.setState({weekDaysSelected:t})}},{key:"tagSelector",value:function(){return this.state.loadingTags?Object(p.jsx)("p",{children:"Loading..."}):Object(p.jsxs)("form",{children:[Object(p.jsx)("label",{htmlFor:"tagsList",hidden:!0,children:"Choose a tag :"}),Object(p.jsx)("select",{className:"form-control mt-4",id:"tagsList",onChange:this.tagChange,defaultValue:{value:"Choose a tag..."},children:this.state.tags.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))})]})}},{key:"setTimeSelector",value:function(e,t,a,n){var s=[];if(t>e)for(var r=e;r<=t;r++)s.push(Object(p.jsx)("option",{value:r,children:r},"optionSelector"+r));else if(e>t)for(var i=e;i>=t;i--)s.push(Object(p.jsx)("option",{value:i,children:i},"optionSelector"+i));var c=Object(p.jsx)("p",{children:"error"});return"from"===n?c=Object(p.jsx)("select",{className:"form-control w-auto",defaultValue:a,onChange:this.fromTimeChange,children:s}):"to"===n&&(c=Object(p.jsx)("select",{className:"form-control w-auto",defaultValue:a,onChange:this.toTimeChange,children:s})),c}},{key:"setDaysCheckboxes",value:function(){var e=this,t=[];return[["Mon",1],["Tue",2],["Wed",3],["Thu",4],["Fri",5],["Sat",6],["Sun",0]].forEach((function(a){t.push(Object(p.jsxs)("div",{className:"form-check form-check-inline",children:[Object(p.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox"+a[0],value:a[1],onChange:function(){return e.weekDaysChange(a[1])}},"checkbox"+a[0]),Object(p.jsx)("label",{className:"form-check-label",htmlFor:"checkbox"+a[0],children:a[0]})]},"checkboxItem"+a[0]))})),t}},{key:"renderChart",value:function(){return"Choose a tag..."===this.state.tagSelected?Object(p.jsx)("div",{}):Object(p.jsx)(Oe,{title:"Chart",color:"primary",children:Object(p.jsx)(xe,{tagSelected:this.state.tagSelected,datetimeRange:this.state.dtrp,timeSelected:[this.state.fromTime,this.state.toTime],weekDaysSelected:this.state.weekDaysSelected})})}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"container-fluid ml-3 mr-1",children:[Object(p.jsxs)("div",{className:"row d-flex",children:[Object(p.jsxs)(Oe,{title:"tag",color:"primary",children:[Object(p.jsx)("p",{className:"text-center small"}),Object(p.jsx)("div",{className:"d-flex align-items-center mb-4 ml-4 mr-4",children:this.tagSelector()})]}),Object(p.jsxs)(Oe,{title:"Chart time range",children:[Object(p.jsx)("p",{className:"text-center small",children:"Default : from -1h to +3h"}),Object(p.jsxs)("div",{className:"align-items-center d-flex",children:[Object(p.jsx)("p",{className:"mb-0 mr-2 w-auto",children:"From :"}),this.setTimeSelector(-1,-12,-1,"from"),Object(p.jsx)("p",{className:"mb-0 ml-4 mr-2 w-auto",children:"To :"}),this.setTimeSelector(1,12,3,"to")]})]}),Object(p.jsxs)(Oe,{title:"Dates and week days",children:[Object(p.jsx)("p",{className:"text-center small",children:"Default : all tags are displayed"}),Object(p.jsxs)("div",{className:"d-flex align-items-center flex-column justify-content-center",children:[Object(p.jsx)(ye.a,{onChange:function(t){return e.setState({dtrp:t})},value:this.state.dtrp}),Object(p.jsx)("hr",{className:"sidebar-divider mb-1"}),Object(p.jsx)("div",{children:this.setDaysCheckboxes()})]})]})]}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-12",children:this.renderChart()})})]})}}]),a}(n.Component),Ne=a(47),ke=(a(137),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataDays:[],importNames:[],selectedImport:"none",deleteResults:""},e.selectedImportChange=function(t){return e.setState({selectedImport:t.target.value})},e.refresh=function(){if(M().then((function(t){(t=t.map((function(e){return new Date(e)}))).forEach((function(e){return e.setHours(0,0,0,0)})),e.setState({dataDays:t.map((function(e){return e.toISOString()}))})})),e.state.dataDays.length>0)for(var t=document.getElementById("revertImportSelector");1<t.childNodes.length;1)t.childNodes[1].remove();U().then((function(t){return e.setState({importNames:t})}))},e.revertClick=function(){var t=document.getElementById("revertButton");"none"!==e.state.selectedImport&&(t.classList.contains("btn-outline-warning")?(t.classList.remove("btn-outline-warning"),t.classList.add("btn-warning"),t.innerText="Are you sure ?"):t.classList.contains("btn-warning")&&(t.setAttribute("disabled","true"),t.innerText="deleting...",G(e.state.selectedImport).then((function(a){if(a[0].ok)t.innerText="data deleted",e.refresh();else{t.innerText="Error";var n=document.createElement("p").appendChild(document.createTextNode("Something wrong happened"));document.getElementById("revertForm").appendChild(n)}}))))},e.eraseClick=function(){var t=document.getElementById("eraseButton");t.classList.contains("btn-outline-danger")?(t.classList.remove("btn-outline-danger"),t.classList.add("btn-danger"),t.innerText="Are you sure ?"):t.classList.contains("btn-danger")&&(t.setAttribute("disabled","true"),t.innerText="deleting...",V(e.state.selectedImport).then((function(a){if(a[0].ok)t.innerText="data deleted",e.refresh();else{t.innerText="Error";var n=document.createElement("p").appendChild(document.createTextNode("Something wrong happened"));document.getElementById("eraseForm").appendChild(n)}})))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e,t,a){if(this.state.dataDays.length>0&&(this.state.importNames!==t.importNames&&(document.getElementById("revertButton").setAttribute("disabled","true"),this.state.importNames.length>0&&(document.getElementById("selectedOptionRevertImportSelector").innerText="Choose an import",this.state.importNames.forEach((function(e){var t=document.createElement("option");t.value=e,t.innerHTML=e,document.getElementById("revertImportSelector").appendChild(t)})))),this.state.selectedImport!==t.selectedImport)){var n=document.getElementById("revertButton");document.getElementById("revertForm").hasChildNodes()&&document.getElementById("revertForm").childNodes.item(0).remove(),n.classList.contains("btn-warning")&&(n.classList.remove("btn-warning"),n.classList.add("btn-outline-warning"),n.innerText="Revert"),"none"===this.state.selectedImport?n.setAttribute("disabled","true"):n.removeAttribute("disabled")}}},{key:"setCalendar",value:function(){var e=this,t=Object(p.jsx)("p",{className:"text-center",children:"No data available"});return console.log(this.state.dataDays.length),this.state.dataDays.length>0&&(t=Object(p.jsxs)("div",{children:[Object(p.jsx)(Ne.default,{tileClassName:function(t){var a=t.date;return"month"===t.view&&e.state.dataDays.includes(a.toISOString())?"text-success":"text-danger"}}),Object(p.jsx)("hr",{className:"sidebar-divider"}),Object(p.jsxs)("div",{className:"d-flex justify-content-between ml-2 mr-4",children:[Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{className:"text-success",children:"Green"})," -> contain data"]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{className:"text-danger",children:"Red"})," -> no data"]})]})]})),t}},{key:"setDeleteCard",value:function(){var e=Object(p.jsx)("div",{});return this.state.dataDays.length>0&&(e=Object(p.jsxs)(Oe,{color:"warning",title:"Delete data",children:[Object(p.jsx)("p",{className:"text-danger text-center",children:"Warning ! These operations are irreversible"}),Object(p.jsx)("p",{className:"font-weight-bold",children:"Revert an import"}),Object(p.jsxs)("div",{className:"d-flex align-items-center",children:[Object(p.jsx)("select",{id:"revertImportSelector",className:"form-control",onChange:this.selectedImportChange,defaultValue:"none",children:Object(p.jsx)("option",{id:"selectedOptionRevertImportSelector",value:"none",children:"Loading..."})}),Object(p.jsx)("button",{id:"revertButton",className:"btn btn-outline-warning ml-3",onClick:this.revertClick,children:"Revert"})]}),Object(p.jsx)("div",{id:"revertForm",className:"text-center text-danger mt-2"}),Object(p.jsx)("div",{className:"mt-4"}),Object(p.jsx)("p",{className:"font-weight-bold",children:"Erase all data"}),Object(p.jsx)("button",{id:"eraseButton",className:"btn btn-outline-danger",onClick:this.eraseClick,children:"Delete all data"}),Object(p.jsx)("div",{id:"eraseForm",className:"text-center text-danger mt-2"})]})),e}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"container-fluid ml-2 mr-2 d-flex align-items-start",children:[Object(p.jsx)(Oe,{title:"Available data",children:this.setCalendar()}),this.setDeleteCard()]})}}]),a}(n.Component)),Ce=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).setContainerClassName=function(){var t="card mb-2";return t+=e.checkMobile()?" w-100":""},e}return Object(o.a)(a,[{key:"checkMobile",value:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t}},{key:"render",value:function(){return Object(p.jsx)("div",{className:this.setContainerClassName(),style:{backgroundColor:"white"},children:this.props.children})}}]),a}(n.Component),Se=a(23),Te=a(184),De=a(178),Be=a(177),Ae=a(186),Ee=a(182);function Ie(e){var t=function(e){var t=function(e){var t=3e5;return new Date(Math.round(e.getTime()/t)*t)}(e);return t.setUTCHours(t.getUTCHours()-t.getTimezoneOffset()/60),t.toISOString().substr(0,16)},a=s.a.useState(!1),r=Object(Se.a)(a,2),i=r[0],c=r[1],o=Object(n.useState)(e.tagName),l=Object(Se.a)(o,2),d=l[0],u=l[1],m=Object(n.useState)(t(new Date(e.tagDatetime))),h=Object(Se.a)(m,2),b=h[0],j=h[1],g=Object(n.useState)(e.tagId),f=Object(Se.a)(g,1)[0],x=function(){c(!1),document.getElementById("editTagActivationResultRequestTag").innerText="",v()},v=function(){window.location.reload(!1)};return Object(p.jsxs)("div",{children:[Object(p.jsxs)("button",{type:"button",className:"btn btn-warning",onClick:function(){c(!0)},children:[Object(p.jsx)("span",{className:"icon text-white mr-2",children:Object(p.jsx)("i",{className:"fas fa-edit"})}),Object(p.jsx)("span",{className:"text",children:"Edit"})]}),Object(p.jsxs)(Te.a,{open:i,onClose:x,"aria-labelledby":"editTagActivation-dialog-title",children:[Object(p.jsx)(Ae.a,{id:"editTagActivationDialogTitle",className:"text-warning pb-0",children:"Edit Tag"}),Object(p.jsxs)(Be.a,{className:"ml-2 mr-2",children:[Object(p.jsxs)("div",{className:"row form-group mt-2",children:[Object(p.jsx)("label",{className:"form-check-label",htmlFor:"editTagActivationNameInput",children:"Name"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"editTagActivationNameInput",value:d,onChange:function(e){u(e.target.value)}}),Object(p.jsx)("div",{className:"invalid-feedback",children:"You have to enter a tag name"})]}),Object(p.jsxs)("div",{className:"row form-group mt-2",children:[Object(p.jsx)("label",{className:"form-check-label",htmlFor:"editTagActivationDatetime",children:"Activation datetime"}),Object(p.jsx)(Ee.a,{value:b,onChange:function(e){j(t(new Date(e.target.value)))},id:"editTagActivationDatetime",type:"datetime-local",className:"w-100 rounded"})]}),Object(p.jsx)("div",{className:"d-flex row form-group mt-2",children:Object(p.jsx)("div",{id:"editTagActivationResultRequestTag",className:"text-center text-info"})})]}),Object(p.jsxs)(De.a,{children:[Object(p.jsx)("button",{id:"editTagActivationApplyButton",onClick:function(){console.log(d+"  "+f+"  "+new Date(b)),function(e,t,a){return ne.apply(this,arguments)}(d,f,b).then((function(e){document.getElementById("editTagActivationResultRequestTag").innerText=e}))},className:"btn text-warning ml-0",children:"Apply"}),Object(p.jsx)("button",{onClick:x,className:"btn text-primary",children:"Close"})]})]})]})}function Le(e){var t=s.a.useState(!1),a=Object(Se.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(e.tagId),o=Object(Se.a)(c,1)[0],l=function(){i(!1),window.location.reload(!1)};return Object(p.jsxs)("div",{children:[Object(p.jsxs)("button",{className:"btn btn-danger",onClick:function(){i(!0)},children:[Object(p.jsx)("span",{className:"icon text-white mr-2",children:Object(p.jsx)("i",{className:"fas fa-trash"})}),Object(p.jsx)("span",{className:"text",children:"Delete"})]}),Object(p.jsxs)(Te.a,{open:r,onClose:l,"aria-labelledby":"deleteTag-dialog-title",children:[Object(p.jsxs)(Be.a,{className:"ml-2 mr-2",children:[Object(p.jsx)("div",{className:"text-center",children:" Are you sure you want to delete this tag ?"}),Object(p.jsx)("div",{id:"responseTextDeleteTagActivationDialog",className:"text-center text-danger small mt-2"})]}),Object(p.jsxs)(De.a,{children:[Object(p.jsx)("button",{id:"buttonDeleteTagActivationDialog",onClick:function(){var e=document.getElementById("buttonDeleteTagActivationDialog");e.setAttribute("disabled","true"),e.innerText="deleting...",function(e){return se.apply(this,arguments)}(o).then((function(t){t[0].ok?(e.innerText="Tag deleted",l()):(e.innerText="Error",document.getElementById("responseTextDeleteTagActivationDialog").innerText="Something wrong happened. Try Later.")}))},className:"btn text-danger ml-0",children:"Yes"}),Object(p.jsx)("button",{onClick:l,className:"btn text-primary",children:"No"})]})]})]})}function Fe(e){var t=s.a.useState(!1),a=Object(Se.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(e.tagName),o=Object(Se.a)(c,1)[0],l=function(){i(!1),window.location.reload(!1)};return Object(p.jsxs)("div",{children:[Object(p.jsxs)("button",{className:"btn btn-outline-danger",onClick:function(){i(!0)},children:[Object(p.jsx)("span",{className:"icon mr-2",children:Object(p.jsx)("i",{className:"fas fa-trash"})}),Object(p.jsx)("span",{className:"text",children:"Delete "+e.tagName})]}),Object(p.jsxs)(Te.a,{open:r,onClose:l,"aria-labelledby":"deleteTag-dialog-title",children:[Object(p.jsxs)(Be.a,{className:"ml-2 mr-2",children:[Object(p.jsxs)("div",{className:"text-center",children:[" Are you sure you want to delete ","All"===o?"all tags":"this tag"," ? All associated tags will also be deleted. This action is irreversible."]}),Object(p.jsx)("div",{id:"responseTextDeleteTagDialog",className:"text-center text-danger small mt-2"})]}),Object(p.jsxs)(De.a,{children:[Object(p.jsx)("button",{id:"buttonYesDeleteTagDialog",onClick:function(){var t=document.getElementById("buttonYesDeleteTagDialog");t.setAttribute("disabled","true"),t.innerText="deleting...",function(e){return re.apply(this,arguments)}(e.tagName).then((function(e){e[0].ok?(t.innerText="Tag deleted",console.log(e[1]),l()):(t.innerText="Error",document.getElementById("responseTextDeleteTagDialog").innerText="Something wrong happened. Try Later.")}))},className:"btn text-danger ml-0",children:"Yes"}),Object(p.jsx)("button",{id:"buttonNoDeleteTagDialog",onClick:l,className:"btn text-primary",children:"No"})]})]})]})}function ze(e){var t=s.a.useState(!1),a=Object(Se.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(e.tagName),o=(Object(Se.a)(c,1)[0],s.a.useState(e.tagName)),l=Object(Se.a)(o,2),d=l[0],u=l[1],m=function(){i(!1),document.getElementById("editTagResultRequestTag").innerText="",h()},h=function(){window.location.reload(!1)};return Object(p.jsxs)("div",{children:[Object(p.jsxs)("button",{type:"button",className:"btn btn-outline-warning",onClick:function(){i(!0)},children:[Object(p.jsx)("span",{className:"icon mr-2",children:Object(p.jsx)("i",{className:"fas fa-edit"})}),Object(p.jsxs)("span",{className:"text",children:["Change ",e.tagName]})]}),Object(p.jsxs)(Te.a,{open:r,onClose:m,"aria-labelledby":"editTag-dialog-title",children:[Object(p.jsx)(Ae.a,{id:"editTagDialogTitle",className:"text-warning pb-0",children:"Change name"}),Object(p.jsxs)(Be.a,{className:"ml-2 mr-2",children:[Object(p.jsxs)("div",{className:"row form-group mt-2",children:[Object(p.jsx)("label",{className:"form-check-label",htmlFor:"editTagNameInput",children:"Name"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"editTagNameInput",value:d,onChange:function(e){u(e.target.value);var t=document.getElementById("editTagApplyButton");t.hasAttribute("disabled")&&(t.removeAttribute("disabled"),t.innerText="Apply",document.getElementById("editTagResultRequestTag").innerText="")}}),Object(p.jsx)("div",{className:"invalid-feedback",children:"You have to enter a tag name"})]}),Object(p.jsx)("div",{className:"d-flex row form-group mt-2",children:Object(p.jsx)("div",{id:"editTagResultRequestTag",className:"text-center text-info"})})]}),Object(p.jsxs)(De.a,{children:[Object(p.jsx)("button",{id:"editTagApplyButton",onClick:function(){if(d){var t=document.getElementById("editTagApplyButton");t.setAttribute("disabled","true"),t.innerText="Updating...",function(e,t){return ie.apply(this,arguments)}(e.tagName,d).then((function(e){document.getElementById("editTagResultRequestTag").innerText=e})),t.innerText="Name changed"}else document.getElementById("editTagResultRequestTag").innerText="You have to enter a tag name !"},className:"btn text-warning ml-0",children:"Apply"}),Object(p.jsx)("button",{onClick:m,className:"btn text-primary",children:"Close"})]})]})]})}var Me=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={tagNames:[],selectedTagName:"",loadingTags:!0,dataDays:[],selectedDay:"",tagsDay:[],toggleView:"viewByDay"},e.selectedTagNameChange=function(t){e.setState({selectedTagName:t.target.value})},e.selectedDayChange=function(t){e.setState({selectedDay:t})},e.refreshTagsDay=function(){e.setState({tagsDay:[]}),P(e.state.selectedDay.toISOString(),"All"===e.state.selectedTagName?"":e.state.selectedTagName).then((function(t){e.setState({tagsDay:t})}))},e.refreshDataDays=function(){e.setState({dataDays:[]}),R("All"===e.state.selectedTagName?"":e.state.selectedTagName).then((function(t){(t=t.map((function(e){return new Date(e)}))).forEach((function(e){return e.setHours(0,0,0,0)})),e.setState({dataDays:t.map((function(e){return e.toISOString()}))})}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;T().then((function(t){t.unshift("All"),e.setState({tagNames:t}),e.setState({loadingTags:!1}),e.setState({selectedTagName:"All"})})),this.refreshDataDays()}},{key:"componentDidUpdate",value:function(e,t,a){this.state.selectedTagName!==t.selectedTagName&&(this.refreshDataDays(),this.state.selectedDay&&this.refreshTagsDay()),this.state.selectedDay!==t.selectedDay&&this.refreshTagsDay()}},{key:"setTagNamesSelector",value:function(){return this.state.loadingTags?Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{className:"form-check-label",htmlFor:"chooseTagsManager",children:"Choose a tag"}),Object(p.jsx)("select",{id:"chooseTagsManager",className:"form-control mb-3",defaultValue:"none",children:Object(p.jsx)("option",{id:"selectedOptionRevertImportSelector",value:"none",children:"Loading..."})})]}):Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{className:"form-check-label",htmlFor:"chooseTagsManager",children:"Choose a tag"}),Object(p.jsx)("select",{id:"chooseTagsManager",className:"form-control mb-3",onChange:this.selectedTagNameChange,defaultValue:"All",children:this.state.tagNames.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))})]})}},{key:"setCalendar",value:function(){var e=this;return Object(p.jsxs)("div",{className:"mb-4 d-flex flex-column align-items-center",children:[Object(p.jsx)("label",{className:"form-check-label",children:"Select a day to see all related tags "}),Object(p.jsx)(Ne.default,{onChange:this.selectedDayChange,tileClassName:function(t){var a=t.date;return"month"===t.view&&e.state.dataDays.includes(a.toISOString())?"text-success":"text-danger"}})]})}},{key:"setEditActivationsByDay",value:function(){if(this.state.selectedDay)return this.state.tagsDay.length>0?Object(p.jsxs)("div",{className:"mb-4 d-flex flex-column justify-content-center",children:[Object(p.jsx)("div",{className:"d-flex w-100 align-content-center justify-content-center",children:Object(p.jsx)("div",{className:"h5",children:this.state.selectedDay.toLocaleDateString([],{weekday:"short",day:"2-digit",month:"short",year:"numeric"})})}),this.state.tagsDay.map((function(e){return Object(p.jsx)("div",{children:Object(p.jsxs)(Ce,{children:[Object(p.jsx)("a",{href:"#tagCard"+e.id,className:"card-header collapsed","data-toggle":"collapse",role:"button","aria-expanded":"true","aria-controls":"tagCard"+e.id,children:Object(p.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(p.jsx)("div",{className:"font-weight-bold text-lg text-primary",children:e.name}),Object(p.jsx)("div",{className:"text-lg text-gray-700",children:new Date(e.startDatetime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),Object(p.jsx)("div",{className:"collapse",id:"tagCard"+e.id,children:Object(p.jsxs)("div",{className:"card-body d-flex justify-content-around",children:[Object(p.jsx)(Ie,{tagName:e.name,tagDatetime:e.startDatetime,tagId:e.id}),Object(p.jsx)(Le,{tagId:e.id})]})})]})},"containerTagsManagerCard"+e.id)}))]}):Object(p.jsx)("div",{className:"mb-4",children:"No tag created this day"})}},{key:"setEditTag",value:function(e){return Object(p.jsxs)("div",{className:"mb-4 d-flex flex-column align-items-center justify-content-center",children:["All"===this.state.selectedTagName?Object(p.jsx)("div",{}):Object(p.jsx)("div",{className:"d-flex justify-content-center mb-3",children:Object(p.jsx)(ze,{tagName:e})}),Object(p.jsx)("div",{className:"d-flex justify-content-center",children:Object(p.jsx)(Fe,{tagName:e})}),Object(p.jsx)("div",{className:"mt-4"}),Object(p.jsx)("div",{className:"mt-4"})]})}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsxs)("div",{className:"d-flex flex-column",children:[this.setTagNamesSelector(),this.setCalendar(),this.setEditActivationsByDay(),this.state.selectedTagName?this.setEditTag(this.state.selectedTagName):Object(p.jsx)("div",{})]})})}}]),a}(n.Component),He=a(179),Re=a(180),Ke=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={tabs:[{route:"/tagshistory",icon:"fa-history",label:"History"},{route:"/tagactivation",icon:"fa-plus-circle",label:"Create"},{route:"/tagsmanager",icon:"fa-wrench",label:"Manage"}]},n}return Object(o.a)(a,[{key:"render",value:function(){return Object(p.jsx)("nav",{className:"navbar-nav bg-primary navbar-expand navbar-dark fixed-bottom",role:"navigation",children:Object(p.jsx)(He.a,{className:"w-100 mt-2",children:Object(p.jsx)("div",{className:" d-flex flex-row justify-content-around w-100",children:this.state.tabs.map((function(e,t){return Object(p.jsx)(Re.a,{className:"nav-item",children:Object(p.jsx)(m.c,{activeStyle:{fontWeight:"bold",color:"white"},style:{color:"#dddfeb"},to:e.route,className:"nav-link",activeClassName:"active",children:Object(p.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[Object(p.jsx)("i",{className:"fas fa-lg fa-fw "+e.icon}),Object(p.jsx)("div",{className:"small mt-1",children:e.label})]})})},"tab-".concat(t))}))})})})}}]),a}(n.Component),Pe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).chosenDatetimeChange=function(e){n.setState({roundedDatetime:n.getDatePickerFormat(new Date(e.target.value))}),n.setState({chosenDatetime:n.getDatePickerBeforeRound(new Date(e.target.value))}),0!==n.state.status&&n.setState({status:0})},n.recentTagClick=function(e){document.getElementById("manualBasicTagInput").value=e.target.value,n.setState({chosenTag:e.target.value}),0!==n.state.status&&n.setState({status:0})},n.manualBasicTagInputChange=function(e){var t=document.querySelector('input[type="radio"][name="recentTagsButtons"]:checked');t&&(t.checked=!1,document.getElementById("recentTagsLbl"+t.id.substr(13)).classList.remove("active")),n.setState({chosenTag:e.target.value}),0!==n.state.status&&n.setState({status:0})},n.basicConfirmButtonClick=function(){if(n.state.chosenTag){n.setState({status:1});var e=new Date(n.state.roundedDatetime).toISOString();(function(e,t){return $.apply(this,arguments)})(n.state.chosenTag,e).then((function(e){e?n.setState({status:2}):n.setState({status:-1})}))}else document.getElementById("basicConfirmButtonInvalidText").innerText="You have to select/enter a tag"},n.changeBasicConfirmButtonStatus=function(e,t){var a=document.getElementById("basicConfirmButton"),n=document.getElementById("basicConfirmButtonText");a.classList.forEach((function(e){(e.startsWith("btn-primary")||e.startsWith("btn-danger")||e.startsWith("btn-success"))&&a.classList.remove(e)})),a.setAttribute("disabled","true"),a.classList.add(e),n.innerText=t},n.loadMoreSuggestion=function(){T().then((function(e){e?n.setState({recentTags:e}):console.log(e)}))},n.state={recentTags:[],roundedDatetime:n.getDatePickerFormat(new Date(Date.now())),chosenDatetime:n.getDatePickerBeforeRound(new Date(Date.now())),chosenTag:"",status:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return Z.apply(this,arguments)})().then((function(t){t?e.setState({recentTags:t}):console.log(t)}))}},{key:"activationResults",value:function(){var e=document.getElementById("basicConfirmButton");-1===this.state.status&&(this.changeBasicConfirmButtonStatus("btn-danger","error"),document.getElementById("uploadButtonInvalidText").innerText=this.state.resultRequest),0===this.state.status&&(this.changeBasicConfirmButtonStatus("btn-primary","Create tag"),e.removeAttribute("disabled"),document.getElementById("basicConfirmButtonInvalidText").innerText=""),1===this.state.status&&this.changeBasicConfirmButtonStatus("btn-primary","activating..."),2===this.state.status&&this.changeBasicConfirmButtonStatus("btn-success","tag created !")}},{key:"showRecentTags",value:function(){var e=this;return this.state.recentTags.length>0?Object(p.jsxs)("div",{className:"d-flex mt-2 flex-column",children:[Object(p.jsx)("p",{className:"mb-0 text-uppercase",children:"Recent tags"}),Object(p.jsx)("div",{className:"d-inline-flex flex-wrap btn-group-toggle","data-toggle":"buttons",children:this.state.recentTags.map((function(t){return Object(p.jsxs)("label",{id:"recentTagsLbl"+e.state.recentTags.indexOf(t),className:"btn btn-outline-primary mt-2 ml-1 mr-1 pl-2 pr-2 pt-1 pb-1",children:[Object(p.jsx)("input",{type:"radio",name:"recentTagsButtons",id:"recentTagsBtn"+e.state.recentTags.indexOf(t),value:t,onClick:e.recentTagClick},"recentTagsBtn"+e.state.recentTags.indexOf(t)),t]},"recentTagsLbl"+e.state.recentTags.indexOf(t))}))}),Object(p.jsx)("button",{className:"btn btn-primary align-self-center mt-2",onClick:this.loadMoreSuggestion,children:Object(p.jsx)("span",{className:"text",children:"Load all"})})]}):Object(p.jsx)("p",{children:"No tag previously created."})}},{key:"manualTag",value:function(){return Object(p.jsxs)("div",{className:"mt-3",children:[Object(p.jsx)("p",{className:"mb-2 text-uppercase",children:"Manual"}),Object(p.jsx)("input",{id:"manualBasicTagInput",className:"form-control form-control-plaintext border pl-2 border-bottom-primary",placeholder:"Enter a tag",onChange:this.manualBasicTagInputChange})]})}},{key:"showDatetime",value:function(){return Object(p.jsxs)("div",{className:"mt-3 d-flex flex-column",children:[Object(p.jsx)("p",{className:"mb-1 text-uppercase",children:"Datetime"}),Object(p.jsx)(Ee.a,{value:this.state.chosenDatetime,onChange:this.chosenDatetimeChange,id:"datetimePickerBasicTag",type:"datetime-local",className:"w-100 rounded"})]})}},{key:"roundTo5Minutes",value:function(e){var t=3e5;return new Date(Math.round(e.getTime()/t)*t)}},{key:"getDatePickerBeforeRound",value:function(e){var t=e;return t.setUTCHours(t.getUTCHours()-t.getTimezoneOffset()/60),t.toISOString().substr(0,16)}},{key:"getDatePickerFormat",value:function(e){var t=this.roundTo5Minutes(e);return t.setUTCHours(t.getUTCHours()-t.getTimezoneOffset()/60),t.toISOString().substr(0,16)}},{key:"showBasicConfirmButton",value:function(){return Object(p.jsxs)("div",{className:"mt-4 align-self-center d-flex flex-column",children:[Object(p.jsx)("div",{id:"basicConfirmButtonInvalidText",className:"text-danger mb-2 align-self-center"}),Object(p.jsx)("button",{id:"basicConfirmButton",className:"btn btn-primary align-self-center",onClick:this.basicConfirmButtonClick,children:Object(p.jsx)("span",{id:"basicConfirmButtonText",className:"text",children:"Create tag"})})]})}},{key:"render",value:function(){return Object(p.jsx)(Oe,{title:"Create a tag",children:Object(p.jsxs)("div",{className:"d-flex flex-column",children:[this.showRecentTags(),this.manualTag(),this.showDatetime(),this.showBasicConfirmButton(),this.activationResults()]})})}}]),a}(n.Component),qe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsx)("div",{className:"d-flex w-100",children:Object(p.jsx)(Pe,{})})})}}]),a}(n.Component),Ue=a(76),We=function(e){return e.replaceAll(/(?:[\0-\/:-@\[-`\{-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"")},Ge=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).loadTags=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.tagsHistory[n.state.tagsHistory.length-1].startDatetime;Q(e).then((function(e){n.state.tagsHistory?n.state.lastDatetime?(n.setState({tagsHistory:e}),n.setState({lastDatetime:void 0})):n.setState({tagsHistory:n.state.tagsHistory.concat(e)}):n.setState({tagsHistory:e})}))},n.loadTagsByCreateDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.lastDatetime;ee(e).then((function(e){n.state.lastDatetime?n.setState({tagsHistory:n.state.tagsHistory.concat(e)}):(n.setState({tagsHistory:e}),n.setState({lastDatetime:n.state.tagsHistory[n.state.tagsHistory.length-1].updatedAt}))}))},n.buttonSortClick=function(){n.setState({sortByActivationTime:!1},(function(){n.loadTagsByCreateDate(new Date(Date.now()).toISOString())}))},n.buttonNewSortClick=function(){n.setState({sortByActivationTime:!0},(function(){n.loadTags(new Date(Date.now()).toISOString())}))},n.formatStringForId=function(e){return e.replaceAll(/(?:[\0-\/:-@\[-`\{-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"")},n.hasMore=function(){var e=!0;return n.state.tagHistoryCount&&n.state.tagHistoryCount<=n.state.tagsHistory.length&&(e=!1),e},n.state={items:Array.from({length:20}),tagsHistory:n.loadTags(new Date(Date.now()).toISOString()),sortByActivationTime:!0,lastDatetime:void 0,tagHistoryCount:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return ae.apply(this,arguments)})().then((function(t){return e.setState({tagHistoryCount:t})}))}},{key:"showBasicConfirmButton",value:function(){return Object(p.jsx)("div",{className:"align-self-center d-flex flex-column",children:Object(p.jsx)("button",{id:"basicConfirmButton",className:"btn btn-primary align-self-center mb-2",onClick:this.buttonSortClick,children:Object(p.jsx)("span",{id:"basicConfirmButtonText",className:"text",children:"Sort by creation time"})})})}},{key:"showNewConfirmButton",value:function(){return Object(p.jsx)("div",{className:"align-self-center d-flex flex-column",children:Object(p.jsx)("button",{id:"basicConfirmButton",className:"btn btn-primary align-self-center mb-2",onClick:this.buttonNewSortClick,children:Object(p.jsx)("span",{id:"basicConfirmButtonText",className:"text",children:"Sort by event time"})})})}},{key:"showCardExample",value:function(){return Object(p.jsxs)("div",{className:"card-header collapsed ",children:[Object(p.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(p.jsx)("div",{className:"font-weight-bold text-lg",children:Object(p.jsx)("u",{children:"Event name"})}),Object(p.jsx)("div",{className:"font-weight-bold text-lg",children:Object(p.jsx)("u",{children:"Creation date"})})]}),Object(p.jsx)("div",{className:"font-weight-bold text-lg text-center",children:Object(p.jsx)("u",{children:"Event date"})})]})}},{key:"setInfiniteScrollContent",value:function(){var e=this,t=Object(p.jsx)("div",{children:"Loading..."});return this.state.tagsHistory&&(t=this.state.tagsHistory.map((function(t){return Object(p.jsx)("div",{children:Object(p.jsxs)(Ce,{children:[Object(p.jsxs)("a",{href:"#tagCard"+We(t.name)+e.state.tagsHistory.indexOf(t),className:"card-header collapsed","data-toggle":"collapse",role:"button","aria-expanded":"true","aria-controls":"tagCard"+t.name+e.state.tagsHistory.indexOf(t),children:[Object(p.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(p.jsx)("div",{className:"font-weight-bold text-lg text-primary",children:t.name}),Object(p.jsx)("div",{className:"small text-gray-500",children:new Date(t.updatedAt).toLocaleString()})]}),Object(p.jsx)("div",{className:"text-lg text-center mt-2 text-gray-700",children:new Date(t.startDatetime).toLocaleDateString([],{weekday:"short",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),Object(p.jsx)("div",{className:"collapse",id:"tagCard"+We(t.name)+e.state.tagsHistory.indexOf(t),children:Object(p.jsxs)("div",{className:"card-body d-flex justify-content-around",children:[Object(p.jsx)(Ie,{tagName:t.name,tagDatetime:t.startDatetime,tagId:t.id}),Object(p.jsx)(Le,{tagId:t.id})]})})]})},"containerTagsHistoryCard"+We(t.name)+e.state.tagsHistory.indexOf(t))}))),t}},{key:"setInfiniteScrollComponent",value:function(){return this.state.tagsHistory?Object(p.jsxs)("div",{children:[this.showBasicConfirmButton(),Object(p.jsx)(Ce,{children:this.showCardExample()}),Object(p.jsx)(Ue.a,{dataLength:this.state.tagsHistory.length,next:this.loadTags,hasMore:this.hasMore(),loader:Object(p.jsx)("p",{children:"Loading..."}),children:this.setInfiniteScrollContent()}),Object(p.jsx)("div",{className:"mt-3"})]}):Object(p.jsx)("div",{children:"Loading..."})}},{key:"setSortedInfiniteScrollComponent",value:function(){return this.state.tagsHistory?Object(p.jsxs)("div",{children:[this.showNewConfirmButton(),Object(p.jsx)(Ce,{children:this.showCardExample()}),Object(p.jsx)(Ue.a,{dataLength:this.state.tagsHistory.length,next:this.loadTagsByCreateDate,hasMore:this.hasMore(),loader:Object(p.jsx)("p",{children:"Loading..."}),children:this.setInfiniteScrollContent()}),Object(p.jsx)("div",{className:"mt-3"})]}):Object(p.jsx)("div",{children:"Loading..."})}},{key:"render",value:function(){var e,t=this.state.sortByActivationTime;return e=t?this.setInfiniteScrollComponent():this.setSortedInfiniteScrollComponent(),Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsx)("div",{sortByActivationTime:t,children:e})})}}]),a}(n.Component),Ye=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).isConnected=function(){switch(n.state.requestLoading){case 0:if(console.log(0),!n.getCookie("apiKey"))return console.log(-10),n.showAuth();if(console.log(10),!n.getCookie("apiKey").includes("ey"))return console.log(-110),n.showAuth();if(console.log(110),v.getState().storeApiKey.apiKey===n.getCookie("apiKey"))return console.log(1110),n.showRouter();console.log(-1110),n.testKey(),n.setState({requestLoading:1});break;case 1:return console.log(1),Object(p.jsx)("p",{children:"Loading..."});case 2:return console.log(2),n.state.requestOk?(n.setState({requestLoading:0}),n.showRouter()):(n.setState({requestLoading:0}),n.showAuth())}},n.setCookie=function(e,t){n.props.cookies.set(e,t)},n.getCookie=function(e){return n.props.cookies.get(e)},n.setCookie("method","in"),n.state={requestLoading:0,requestOk:!1},n}return Object(o.a)(a,[{key:"checkMobile",value:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}},{key:"showAuth",value:function(){if(this.getCookie("method")){if("in"===this.getCookie("method"))return Object(p.jsx)(oe,{});if("up"===this.getCookie("method"))return Object(p.jsx)(ue,{})}}},{key:"testKey",value:function(){var e=this,t=this.getCookie("apiKey");v.dispatch({type:"SETKEY",value:t}),function(){return _.apply(this,arguments)}().then((function(t){e.setState({requestOk:t.ok}),e.setState({requestLoading:2})}))}},{key:"showRouter",value:function(){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{id:"wrapper",children:[this.checkMobile()?Object(p.jsx)("div",{}):Object(p.jsx)(b,{}),Object(p.jsxs)("div",{id:"content-wrapper",className:"d-flex flex-column",children:[Object(p.jsxs)("div",{id:"content",children:[Object(p.jsx)(O,{}),Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.a,{from:"/dashboard?",to:"/"}),Object(p.jsx)(u.b,{exact:!0,path:"/",component:pe}),Object(p.jsx)(u.b,{exact:!0,path:"/index",component:pe}),Object(p.jsx)(u.b,{exact:!0,path:"/datamanager",component:ke}),Object(p.jsx)(u.b,{path:"/tagsmanager",component:Me}),Object(p.jsx)(u.b,{path:"/tagactivation",component:qe}),Object(p.jsx)(u.b,{path:"/tagshistory",component:Ge}),Object(p.jsx)(u.b,{path:"/import",component:je}),Object(p.jsx)(u.b,{path:"/chartsbytag",component:we}),Object(p.jsx)(u.b,{path:"*",component:he})]})})]}),this.showFooter()]})]})})}},{key:"showFooter",value:function(){return this.checkMobile()?Object(p.jsx)(Ke,{}):Object(p.jsx)("footer",{className:"row sticky-footer bg-white",children:Object(p.jsx)("div",{className:"container my-auto",children:Object(p.jsx)("div",{className:"copyright text-center my-auto",children:Object(p.jsx)("span",{children:"OMG web 2021"})})})})}},{key:"render",value:function(){return Object(p.jsx)(m.a,{children:this.isConnected()})}}]),a}(n.Component),Ve=Object(h.a)(Ye),Je=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(p.jsx)(Ve,{})}}]),a}(n.Component),_e=a(181),Ze=(a(138),a(139),a(87));i.a.render(Object(p.jsx)(_e.a,{children:Object(p.jsx)(Ze.a,{store:v,children:Object(p.jsx)(Je,{})})}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.95c79896.chunk.js.map